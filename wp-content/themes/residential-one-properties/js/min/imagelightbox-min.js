!function($,t,n,e){"use strict";var i=function(){var t=n.body||n.documentElement,t=t.style;return""==t.WebkitTransition?"-webkit-":""==t.MozTransition?"-moz-":""==t.OTransition?"-o-":""==t.transition?"":!1},o=i()!==!1,r=function(t,n,e){var o={},r=i();o[r+"transform"]="translateX("+n+")",o[r+"transition"]=r+"transform "+e+"s linear",t.css(o)},a="ontouchstart"in t,u=t.navigator.pointerEnabled||t.navigator.msPointerEnabled,d=function(t){if(a)return!0;if(!u||"undefined"==typeof t||"undefined"==typeof t.pointerType)return!1;if("undefined"!=typeof t.MSPOINTER_TYPE_MOUSE){if(t.MSPOINTER_TYPE_MOUSE!=t.pointerType)return!0}else if("mouse"!=t.pointerType)return!0;return!1};$.fn.imageLightbox=function(e){var e=$.extend({selector:'id="imagelightbox"',allowedTypes:"png|jpg|jpeg|gif",animationSpeed:250,preloadNext:!0,enableKeyboard:!0,quitOnEnd:!1,quitOnImgClick:!1,quitOnDocClick:!0,onStart:!1,onEnd:!1,onLoadStart:!1,onLoadEnd:!1},e),i=$([]),c=$(),f=$(),l=0,p=0,s=0,g=!1,h=function(t){return"a"==$(t).prop("tagName").toLowerCase()&&new RegExp(".("+e.allowedTypes+")$","i").test($(t).attr("href"))},v=function(){if(!f.length)return!0;var n=.8*$(t).width(),e=.9*$(t).height(),i=new Image;i.src=f.attr("src"),i.onload=function(){if(l=i.width,p=i.height,l>n||p>e){var o=l/p>n/e?l/n:p/e;l/=o,p/=o}f.css({width:l+"px",height:p+"px",top:($(t).height()-p)/2+"px",left:($(t).width()-l)/2+"px"})}},m=function(t){if(g)return!1;if(t="undefined"==typeof t?!1:"left"==t?1:-1,f.length){if(t!==!1&&(i.length<2||e.quitOnEnd===!0&&(-1===t&&0==i.index(c)||1===t&&i.index(c)==i.length-1)))return E(),!1;var n={opacity:0};o?r(f,100*t-s+"px",e.animationSpeed/1e3):n.left=parseInt(f.css("left"))+100*t+"px",f.animate(n,e.animationSpeed,function(){x()}),s=0}g=!0,e.onLoadStart!==!1&&e.onLoadStart(),setTimeout(function(){f=$("<img "+e.selector+" />").attr("src",c.attr("href")).load(function(){f.appendTo("body"),v();var n={opacity:1};if(f.css("opacity",0),o)r(f,-100*t+"px",0),setTimeout(function(){r(f,"0px",e.animationSpeed/1e3)},50);else{var a=parseInt(f.css("left"));n.left=a+"px",f.css("left",a-100*t+"px")}if(f.animate(n,e.animationSpeed,function(){g=!1,e.onLoadEnd!==!1&&e.onLoadEnd()}),e.preloadNext){var u=i.eq(i.index(c)+1);u.length||(u=i.eq(0)),$("<img />").attr("src",u.attr("href")).load()}}).error(function(){e.onLoadEnd!==!1&&e.onLoadEnd()});var n=0,a=0,p=0;f.on(u?"pointerup MSPointerUp":"click",function(t){if(t.preventDefault(),e.quitOnImgClick)return E(),!1;if(d(t.originalEvent))return!0;var n=(t.pageX||t.originalEvent.pageX)-t.target.offsetLeft;c=i.eq(i.index(c)-(l/2>n?1:-1)),c.length||(c=i.eq(l/2>n?i.length:0)),m(l/2>n?"left":"right")}).on("touchstart pointerdown MSPointerDown",function(t){return!d(t.originalEvent)||e.quitOnImgClick?!0:(o&&(p=parseInt(f.css("left"))),void(n=t.originalEvent.pageX||t.originalEvent.touches[0].pageX))}).on("touchmove pointermove MSPointerMove",function(t){return!d(t.originalEvent)||e.quitOnImgClick?!0:(t.preventDefault(),a=t.originalEvent.pageX||t.originalEvent.touches[0].pageX,s=n-a,void(o?r(f,-s+"px",0):f.css("left",p-s+"px")))}).on("touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",function(t){return!d(t.originalEvent)||e.quitOnImgClick?!0:void(Math.abs(s)>50?(c=i.eq(i.index(c)-(0>s?1:-1)),c.length||(c=i.eq(0>s?i.length:0)),m(s>0?"right":"left")):o?r(f,"0px",e.animationSpeed/1e3):f.animate({left:p+"px"},e.animationSpeed/2))})},e.animationSpeed+100)},x=function(){return f.length?(f.remove(),void(f=$())):!1},E=function(){return f.length?void f.animate({opacity:0},e.animationSpeed,function(){x(),g=!1,e.onEnd!==!1&&e.onEnd()}):!1};return $(t).on("resize",v),e.quitOnDocClick&&$(n).on(a?"touchend":"click",function(t){f.length&&!$(t.target).is(f)&&E()}),e.enableKeyboard&&$(n).on("keyup",function(t){return f.length?(t.preventDefault(),27==t.keyCode&&E(),void(37!=t.keyCode&&39!=t.keyCode||(c=i.eq(i.index(c)-(37==t.keyCode?1:-1)),c.length||(c=i.eq(37==t.keyCode?i.length:0)),m(37==t.keyCode?"left":"right")))):!0}),$(n).on("click",this.selector,function(t){return h(this)?(t.preventDefault(),g?!1:(g=!1,e.onStart!==!1&&e.onStart(),c=$(this),void m())):!0}),this.each(function(){return h(this)?void(i=i.add($(this))):!0}),this.switchImageLightbox=function(t){var n=i.eq(t);if(n.length){var e=i.index(c);c=n,m(e>t?"left":"right")}return this},this.quitImageLightbox=function(){return E(),this},this}}(jQuery,window,document);